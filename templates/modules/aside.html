<aside class="">
    <div class="aside-content">
        <div class="aside-page main-page active">
            <div class="author">
                <div class="cover">
                    <img th:with="img = ${#strings.isEmpty(theme.config.sidebar.iemo_cover_author) ? '/themes/theme-iemo/assets/images/cover-author.jpg' : theme.config.sidebar.iemo_cover_author}"
                         th:src="${img}" alt="">
                </div>
                <div class="author-info">
                    <div class="avatar">
                        <img th:src="${theme.config.sidebar.iemo_avatar_author}">
                    </div>
                    <div class="name" th:text="${theme.config.sidebar.iemo_name_author}"></div>
                    <div class="des" th:text="${theme.config.sidebar.iemo_des_author}"></div>
                    <div class="post-info" th:with="stats = ${siteStatsFinder.getStats()}">
                        <div class="posts">
                            <i>文章</i>
                            <span th:text="${stats.post}"></span>
                        </div>
                        <div class="tags" th:with="tags = ${tagFinder.listAll()}">
                            <i>标签</i>
                            <span th:text="${tags.size}"></span>
                        </div>
                        <div class="notes" th:if="${pluginFinder.available('PluginMoments')}"
                             th:with=" moment = ${momentFinder.listAll()}">
                            <i>说说</i>
                            <span th:text="${moment.size()}"></span>
                        </div>
                    </div>
                </div>
                <div th:if="${theme.config.sidebar.iemo_aside_subpage}" class="aside-btn-open">查看更多<i
                        class="iconfont icon-chevron-right"></i></div>
            </div>
<!--?            增加一个申请友链的按钮 -->
            <div class="aside-btn-apply">
                <a href="/linksaf" target="_blank" rel="noopener">申请友链</a>
            </div>
            <style>
               .aside-btn-apply{
                    /* 按钮宽度和post-info的宽度相同 */
                    width: 100%;
                    text-align: center;
                    margin-top: 10px;
                    display: none;
                   /* 按钮外边距 */
                    margin-bottom: 10px;
                }
               .aside-btn-apply a{
                    display: inline-block;
                    padding: 10px 20px;
                    background-color: #007bff;
                    color: #fff;
                    border-radius: 5px;
                    text-decoration: none;
                }
            </style>
            <script>
                // 只在https://blog.likesrt.com/links2页面显示申请友链按钮
                if (window.location.href === "https://blog.likesrt.com/linksaf") {
                    document.querySelector(".aside-btn-apply").style.display = "block";
                }
            </script>

            <th:block th:if="${theme.config.post.iemo_toc}">
                <div class="toc">
                    <h2>目录 <span>Toc.</span></h2>
                    <ul></ul>
                </div>
            </th:block>
            <th:block th:if="${not #lists.isEmpty(theme.config.sidebar.socialMedia)}"
                      th:with="socialMedias = ${theme.config.sidebar.socialMedia}">
                <div class="social">
                    <h2>社交 <span>Social.</span></h2>
                    <div class="social-content">
                        <ul class="menu">
                            <li class="menu-item" th:each="socialMedia : ${socialMedias}">
                                <a th:title="${socialMedia.name}" target="_blank" rel="noopener"
                                   th:href="${socialMedia.url}">
                                    <span th:class="${socialMedia.icon}"></span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </th:block>
            <th:block th:if="${pluginFinder.available('PluginMoments') && not #lists.isEmpty(momentFinder.listAll())}">
                <div class="notes-box">
                    <h2>说说 <span>Notes.</span></h2>
                    <ul>
                        <li th:each="moment : ${momentFinder.listAll()}" th:with="content=${moment.spec.content}">
                            <a th:href="@{/moments}">
                                <div class="notes-content">
                                    <p th:utext="${content.raw}"></p>
                                </div>
                                <div class="notes-info">
                                    <div class="time">
                                        <span th:text="${#dates.format(moment.spec.releaseTime,'yyyy年MM月dd日')}"></span>
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </th:block>
            <script>
                // 在页面加载完成后执行
                document.addEventListener("DOMContentLoaded", function () {
                    // 获取所有的说说元素
                    var moments = document.querySelectorAll(".notes-box li");

                    // 如果说说数量超过5条，隐藏多余的元素
                    if (moments.length > 5) {
                        for (var i = 5; i < moments.length; i++) {
                            moments[i].style.display = "none";
                        }
                    }
                });
            </script>


        </div>
        <th:block th:replace="~{modules/inc/aside-sub-page}"/>
    </div>
    <th:block th:replace="~{modules/footer}"/>
</aside>